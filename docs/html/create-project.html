<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating a project &mdash; srsgui  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Defining instrument classes" href="define-instrument.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> srsgui
          </a>
              <div class="version">
                0.2.16
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating a project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-file-structure-for-a-project">Creating file structure for a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#populating-the-taskconfig-file">Populating the .taskconfig file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="define-instrument.html">Defining instrument classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-task.html">Writing a task script</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example project</a></li>
<li class="toctree-l1"><a class="reference internal" href="srsgui.html">srsgui APIs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">srsgui</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Creating a project</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/create-project.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="creating-a-project">
<span id="top-of-creating-project"></span><h1>Creating a project<a class="headerlink" href="#creating-a-project" title="Permalink to this heading"></a></h1>
<p>Here is how to create a <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> project as shown in the example
directory.</p>
<blockquote>
<div><ul class="simple">
<li><p>Create file structure for a project.</p></li>
<li><p>Make a list of instrument classes and Python scripts in a .taskconfig file.</p></li>
<li><p>Define instrument drivers based on the <a class="reference internal" href="srsgui.inst.html#srsgui.inst.instrument.Instrument" title="srsgui.inst.instrument.Instrument"><code class="xref py py-class docutils literal notranslate"><span class="pre">Instrument</span></code></a> class</p></li>
<li><p>Write Python scripts based on the <a class="reference internal" href="srsgui.task.html#srsgui.task.task.Task" title="srsgui.task.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> class.</p></li>
<li><p>Open the configuration file in the <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> application</p></li>
<li><p>Connect instruments from the Instruments menu, if connections not defined
in the configuration file.</p></li>
<li><p>Select a task from the Task menu and run it.</p></li>
</ul>
</div></blockquote>
<section id="creating-file-structure-for-a-project">
<h2>Creating file structure for a project<a class="headerlink" href="#creating-file-structure-for-a-project" title="Permalink to this heading"></a></h2>
<p>Each <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> project makes a use of the predefined directory structure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">Project</span> <span class="n">root</span> <span class="n">directory</span>
    <span class="o">/</span><span class="n">instruments</span>
    <span class="o">/</span><span class="n">tasks</span>
    <span class="n">project</span><span class="o">.</span><span class="n">taskconfig</span>
</pre></div>
</div>
<p>A project directory has a .taskconfig configuration file and multiple Python
modules in two special subdirectory: instruments and tasks.
Whenever open a .taskconfig file from the SRSGUI application,
Python modules in those directories will be forced to reload.</p>
<p>Typically, a Python interpreter loads a module when it is imported for the first time,
and never check again if the module is modified. When you make changes to a module, save it,
and run a script using it, you would not see the changes because the Python interpreter
would not use the modified module, as long as the previous copy of the module is in memory.
The Python interpreter needs to restart to take an effect of the changed modules.</p>
<p>When you open a .taskconfig file again from the <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> application,
it reloads all the Python modules in the 2 subdirectories.
It helps when you modify and debug a module in the subdirectories.
Instead of restart the application every time a module is changed,
you can reopen the .taskconfig file to see the changes from modified modules.
If you modify a Python module other than the ones in the 2 directories
with respect to the current .taskconfig file, you have to restart the <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> application
to use the modified module.</p>
<p>Python does not allow to use spaces in its package and module names.
Use underscore if you need spaces between words.</p>
</section>
<section id="populating-the-taskconfig-file">
<h2>Populating the .taskconfig file<a class="headerlink" href="#populating-the-taskconfig-file" title="Permalink to this heading"></a></h2>
<p>Each <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> project has a .taskconfig file. The configuration file
contains:</p>
<blockquote>
<div><ul class="simple">
<li><p>name of the project,</p></li>
<li><p>a list of instruments to use</p></li>
<li><p>a list tasks to run</p></li>
</ul>
</div></blockquote>
<p>The following is the configuration file in the example directory
of <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> package without comment lines.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">:</span> <span class="n">srsgui</span> <span class="n">example</span> <span class="n">project</span> <span class="n">using</span> <span class="n">an</span> <span class="n">oscilloscope</span> <span class="ow">and</span> <span class="n">a</span> <span class="n">clock</span> <span class="n">generator</span>

<span class="n">inst</span><span class="p">:</span> <span class="n">cg</span><span class="p">,</span>  <span class="n">instruments</span><span class="o">.</span><span class="n">cg635</span><span class="p">,</span>   <span class="n">CG635</span>
<span class="n">inst</span><span class="p">:</span> <span class="n">osc</span><span class="p">,</span> <span class="n">instruments</span><span class="o">.</span><span class="n">sds1202</span><span class="p">,</span> <span class="n">SDS1202</span>

<span class="n">task</span><span class="p">:</span> <span class="o">*</span><span class="n">IDN</span> <span class="n">test</span><span class="p">,</span>    <span class="n">tasks</span><span class="o">.</span><span class="n">first</span><span class="p">,</span>  <span class="n">FirstTask</span>
<span class="n">task</span><span class="p">:</span> <span class="n">Plot</span> <span class="n">example</span><span class="p">,</span> <span class="n">tasks</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="n">SecondTask</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The keyword ‘name:’ is use as</p>
<blockquote>
<div><ul class="simple">
<li><p>Title of the SRSGUI application main window (Look at the top of
this <a class="reference internal" href="index.html#top-of-screen-capture-1"><span class="std std-ref">screen capture</span></a>.</p></li>
<li><p>Directory name for the project data saving under ~/home/task-results</p></li>
</ul>
</div></blockquote>
<p>You can specify a list of instrument classes to be included in the project using ‘inst:’ keyword.
The first column after the keyword is the name of the instrument used across the project:</p>
<blockquote>
<div><ul class="simple">
<li><p>Menu items under <strong>Instruments</strong> menu. It is used to connect and disconnect
the selected instrument.</p></li>
<li><p>Tab labels in Instrument Info panel (in the top left corner under the red STOP button
in this <a class="reference internal" href="index.html#top-of-screen-capture-1"><span class="std std-ref">screen capture</span></a>.</p></li>
<li><p>Name used in terminal to specify a instrument. Make it short if you use a lot
in the terminal at the bottom right corner in this
<a class="reference internal" href="index.html#top-of-screen-capture-1"><span class="std std-ref">screen capture</span></a>.</p></li>
<li><p>Argument in <a class="reference internal" href="srsgui.task.html#srsgui.task.task.Task.get_instrument" title="srsgui.task.task.Task.get_instrument"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_instrument()</span></code></a> method in
<a class="reference internal" href="srsgui.task.html#srsgui.task.task.Task" title="srsgui.task.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> class.</p></li>
</ul>
</div></blockquote>
<p>The second column is the path to the module that contains the instrument class.
The path can be relative to the .taskconfig file if it is a local module,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inst</span><span class="p">:</span> <span class="n">cg</span><span class="p">,</span>  <span class="n">instruments</span><span class="o">.</span><span class="n">cg635</span><span class="p">,</span>   <span class="n">CG635</span>
</pre></div>
</div>
<p>or a path from one of the Python site_package directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inst</span><span class="p">:</span> <span class="n">lia</span><span class="p">,</span> <span class="n">srsinst</span><span class="o">.</span><span class="n">sr860</span><span class="p">,</span>  <span class="n">SR860</span>
</pre></div>
</div>
<p>The third column is the name of the class defined in the module.</p>
<p>You can add the optional fourth column if an instrument is used with a fixed connection parameters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inst</span><span class="p">:</span> <span class="n">cg2</span><span class="p">,</span>  <span class="n">instruments</span><span class="o">.</span><span class="n">cg635</span><span class="p">,</span>   <span class="n">CG635</span><span class="p">,</span>   <span class="n">serial</span><span class="p">:</span><span class="n">COM4</span><span class="p">:</span><span class="mi">9600</span>
<span class="n">inst</span><span class="p">:</span> <span class="n">osc2</span><span class="p">,</span> <span class="n">instruments</span><span class="o">.</span><span class="n">sds1202</span><span class="p">,</span> <span class="n">SDS1202</span><span class="p">,</span> <span class="n">tcpip</span><span class="p">:</span><span class="mf">192.168.1.100</span><span class="p">:</span><span class="mi">5035</span>
</pre></div>
</div>
<p>It gets the instruments connected, while a configuration file is loading.</p>
<p>The first instrument that appears in the configuration file is the default instrument.
When a command is entered from the terminal of the srsgui application, without instrument prefix,
it will be sent to the default instrument.</p>
<p>The keyword ‘task:’ is used to specify a task class to be used in the configuration file.
the first column after the ‘task:’ keyword is the name of the task,
the second is path to the module, the third one is the name of the task class.
It specifies a task class in the same way with instrument classes.</p>
<p>When you open a .taskconfig file, in <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> application, the names of the tasks
appear as menu items under the Task menu, as shown at the top of
this <a class="reference internal" href="index.html#top-of-screen-capture-1"><span class="std std-ref">screen capture</span></a>.</p>
<p>You can select one of the task items and run the task.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="define-instrument.html" class="btn btn-neutral float-right" title="Defining instrument classes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Chulhoon Kim.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>